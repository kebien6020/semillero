{"version":3,"names":[],"mappings":"","sources":["als_matrix_criterion_form.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\n'use strict';\n\nrequire('./app.js');\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = (typeof window !== \"undefined\" ? window['ReactDOM'] : typeof global !== \"undefined\" ? global['ReactDOM'] : null);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _CriterionEditor = require('./components/CriterionEditor.jsx');\n\nvar _CriterionEditor2 = _interopRequireDefault(_CriterionEditor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar data = JSON.parse(document.getElementById('value-functions-initial-data').innerHTML);\n\nvar alternatives = data.alternatives,\n    valueFunctions = data.valueFunctions,\n    type = data.type,\n    editMode = data.editMode;\n\nvar buttonText = (editMode ? 'Actualizar' : 'Agregar') + ' criterio';\n\n_reactDom2.default.render(_react2.default.createElement(\n    'div',\n    null,\n    _react2.default.createElement(_CriterionEditor2.default, {\n        alternatives: alternatives,\n        initialValueFunctions: valueFunctions,\n        initialType: type\n    }),\n    _react2.default.createElement(\n        'div',\n        { className: 'submit-container' },\n        _react2.default.createElement('input', { type: 'submit', value: buttonText })\n    )\n), document.getElementById('value-function-editor'));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./app.js\":2,\"./components/CriterionEditor.jsx\":3}],2:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar $ = (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null);\n\n$('.success-panel, .error-panel').addClass('alert fade in');\n$().alert();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],3:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _ExtensibleInputTable = require('./ExtensibleInputTable.jsx');\n\nvar _ExtensibleInputTable2 = _interopRequireDefault(_ExtensibleInputTable);\n\nvar _CriterionTypeSelector = require('./CriterionTypeSelector.jsx');\n\nvar _CriterionTypeSelector2 = _interopRequireDefault(_CriterionTypeSelector);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CriterionEditor = function (_React$Component) {\n    _inherits(CriterionEditor, _React$Component);\n\n    function CriterionEditor(props) {\n        _classCallCheck(this, CriterionEditor);\n\n        var _this = _possibleConstructorReturn(this, (CriterionEditor.__proto__ || Object.getPrototypeOf(CriterionEditor)).call(this, props));\n\n        var initialType = props.initialType,\n            alternatives = props.alternatives;\n\n\n        var initialValueFunctions = void 0;\n        if (props.initialValueFunctions) initialValueFunctions = props.initialValueFunctions;else initialValueFunctions = Object.keys(alternatives).map(function (id) {\n            return { id: id };\n        });\n\n        // Add missing alternatives\n        if (initialValueFunctions.length < Object.keys(alternatives).length) {\n            var _loop = function (alternativeId) {\n                if (alternatives.hasOwnProperty(alternativeId)) if (!initialValueFunctions.some(func => Number(func.id) === Number(alternativeId))) initialValueFunctions.push({ id: Number(alternativeId) });\n            };\n\n            // eslint-disable-next-line prefer-const\n            for (let alternativeId in alternatives) {\n                _loop(alternativeId);\n            }\n        }initialValueFunctions = initialValueFunctions.map(function (func) {\n            if (!func.data || func.data.length === 0) if (initialType === 'multi') func.data = props.initialValueFunctions[0].data.map(function (_ref) {\n                var _ref2 = _slicedToArray(_ref, 1),\n                    name = _ref2[0];\n\n                return [name, ''];\n            });else func.data = [['', ''], ['', ''], ['', '']];\n            return func;\n        });\n\n        var initialOptions = void 0;\n        if (props.initialOptions) initialOptions = props.initialOptions;else if (initialType === 'multi') initialOptions = initialValueFunctions[0].data.map(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 1),\n                x = _ref4[0];\n\n            return x;\n        });else initialOptions = ['', ''];\n\n        _this.state = {\n            type: initialType,\n            options: initialOptions,\n            valueFunctions: initialValueFunctions\n        };\n        _this.handleTypeChange = _this.handleTypeChange.bind(_this);\n        _this.handleOptionsChange = _this.handleOptionsChange.bind(_this);\n        _this.handleOptionAdd = _this.handleOptionAdd.bind(_this);\n        _this.handleOptionRemove = _this.handleOptionRemove.bind(_this);\n        _this.handleTableChange = _this.handleTableChange.bind(_this);\n        _this.handleTableAddRow = _this.handleTableAddRow.bind(_this);\n        _this.handleTableRemoveRow = _this.handleTableRemoveRow.bind(_this);\n        _this.handleTableRowBlur = _this.handleTableRowBlur.bind(_this);\n        return _this;\n    }\n\n    _createClass(CriterionEditor, [{\n        key: 'handleTypeChange',\n        value: function handleTypeChange(event) {\n            var type = event.target.value;\n            this.setState(function (state) {\n                state.type = type;\n                state.valueFunctions = state.valueFunctions.map(function (func) {\n                    func.data = state.options.map(function (op, i) {\n                        if (func.data[i]) return [op, func.data[i][1]];\n                        return [op, ''];\n                    });\n                    return func;\n                });\n                return state;\n            });\n        }\n    }, {\n        key: 'handleOptionsChange',\n        value: function handleOptionsChange(value, i) {\n            this.setState(function (state) {\n                state.options[i] = value;\n                state.valueFunctions = state.valueFunctions.map(function (func) {\n                    func.data = state.options.map(function (op, i) {\n                        if (func.data[i]) return [op, func.data[i][1]];\n                        return [op, ''];\n                    });\n                    return func;\n                });\n                return state;\n            });\n        }\n    }, {\n        key: 'handleOptionAdd',\n        value: function handleOptionAdd() {\n            this.setState(function (state) {\n                state.options.push('');\n                state.valueFunctions = state.valueFunctions.map(function (func) {\n                    func.data = state.options.map(function (op, i) {\n                        if (func.data[i]) return [op, func.data[i][1]];\n                        return [op, ''];\n                    });\n                    return func;\n                });\n                return state;\n            });\n        }\n    }, {\n        key: 'handleOptionRemove',\n        value: function handleOptionRemove() {\n            if (this.state.options.length > 1) this.setState(function (state) {\n                state.options.pop();\n                state.valueFunctions = state.valueFunctions.map(function (func) {\n                    func.data = state.options.map(function (op, i) {\n                        if (func.data[i]) return [op, func.data[i][1]];\n                        return [op, ''];\n                    });\n                    return func;\n                });\n                return state;\n            });\n        }\n    }, {\n        key: 'handleTableChange',\n        value: function handleTableChange(value, i, j, tag) {\n            this.setState(function (state) {\n                state.valueFunctions[tag].data[i][j] = value;\n                return state;\n            });\n        }\n    }, {\n        key: 'handleTableAddRow',\n        value: function handleTableAddRow(tag) {\n            this.setState(function (state) {\n                state.valueFunctions[tag].data.push(['', '']);\n                return state;\n            });\n        }\n    }, {\n        key: 'handleTableRemoveRow',\n        value: function handleTableRemoveRow(tag) {\n            this.setState(function (state) {\n                state.valueFunctions[tag].data.pop();\n                return state;\n            });\n        }\n    }, {\n        key: 'handleTableRowBlur',\n        value: function handleTableRowBlur(i, tag) {\n            this.setState(function (state) {\n                var typeIsNumeric = state.type === 'numeric';\n                var newData = state.valueFunctions[tag].data.map(function (_ref5) {\n                    var _ref6 = _slicedToArray(_ref5, 2),\n                        x = _ref6[0],\n                        y = _ref6[1];\n\n                    var newX = typeIsNumeric && isNaN(Number(x)) ? '' : x;\n                    var newY = isNaN(Number(y)) ? '' : y;\n                    return [newX, newY];\n                });\n                state.valueFunctions[tag].data = newData;\n                return state;\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var alternatives = this.props.alternatives;\n            var _state = this.state,\n                valueFunctions = _state.valueFunctions,\n                type = _state.type,\n                options = _state.options;\n\n            var editors = valueFunctions.map(function (valueFunction, i) {\n                var content = void 0;\n                if (type === 'numeric') content = valueFunction.data;else content = options.map(function (o, i) {\n                    var score = valueFunction.data[i] ? valueFunction.data[i][1] : '';\n                    return [o, score];\n                });\n                return _react2.default.createElement(_ExtensibleInputTable2.default, {\n                    key: i,\n                    tag: i,\n                    titles: ['Valor', 'Puntaje'],\n                    content: content,\n                    mainTitle: alternatives[valueFunction.id].name,\n                    inputNamePrefix: valueFunction.id + '-',\n                    fixedColumns: type === 'multi' ? [0] : [],\n                    onChange: _this2.handleTableChange,\n                    onAddRow: _this2.handleTableAddRow,\n                    onRemoveRow: _this2.handleTableRemoveRow,\n                    onRowBlur: _this2.handleTableRowBlur\n                });\n            });\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(_CriterionTypeSelector2.default, {\n                    type: this.state.type,\n                    options: this.state.options,\n                    onTypeChange: this.handleTypeChange,\n                    onOptionsChange: this.handleOptionsChange,\n                    onOptionAdd: this.handleOptionAdd,\n                    onOptionRemove: this.handleOptionRemove\n                }),\n                editors\n            );\n        }\n    }]);\n\n    return CriterionEditor;\n}(_react2.default.Component);\n\nexports.default = CriterionEditor;\n\n\nCriterionEditor.propTypes = {\n    initialValueFunctions: _react2.default.PropTypes.array,\n    initialOptions: _react2.default.PropTypes.array,\n    initialType: _react2.default.PropTypes.string,\n    alternatives: _react2.default.PropTypes.object.isRequired\n};\n\nCriterionEditor.defaultProps = {\n    initialType: 'numeric'\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./CriterionTypeSelector.jsx\":4,\"./ExtensibleInputTable.jsx\":5}],4:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = CriterionTypeSelector;\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _ExtensibleInputTable = require('./ExtensibleInputTable.jsx');\n\nvar _ExtensibleInputTable2 = _interopRequireDefault(_ExtensibleInputTable);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction CriterionTypeSelector(props) {\n    var type = props.type,\n        options = props.options,\n        onTypeChange = props.onTypeChange,\n        onOptionsChange = props.onOptionsChange,\n        onOptionAdd = props.onOptionAdd,\n        onOptionRemove = props.onOptionRemove;\n\n    var table = null;\n    if (type === 'multi') table = _react2.default.createElement(_ExtensibleInputTable2.default, {\n        titles: ['Opciones para el criterio'],\n        onChange: onOptionsChange,\n        onAddRow: onOptionAdd,\n        onRemoveRow: onOptionRemove,\n        content: options.map(function (o) {\n            return [o];\n        })\n    });\n\n    return _react2.default.createElement(\n        'div',\n        { className: 'form-group' },\n        _react2.default.createElement(\n            'label',\n            null,\n            'Tipo'\n        ),\n        _react2.default.createElement(\n            'select',\n            { name: 'type', value: type, onChange: onTypeChange },\n            _react2.default.createElement(\n                'option',\n                { value: 'numeric' },\n                'Numerico'\n            ),\n            _react2.default.createElement(\n                'option',\n                { value: 'multi' },\n                'Selecci\\xF3n m\\xFAltiple'\n            )\n        ),\n        table\n    );\n}\n\nCriterionTypeSelector.propTypes = {\n    type: _react2.default.PropTypes.string.isRequired,\n    options: _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string),\n    onTypeChange: _react2.default.PropTypes.func.isRequired,\n    onOptionsChange: _react2.default.PropTypes.func.isRequired,\n    onOptionAdd: _react2.default.PropTypes.func.isRequired,\n    onOptionRemove: _react2.default.PropTypes.func.isRequired\n};\n\nCriterionTypeSelector.defaultProps = {\n    options: []\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./ExtensibleInputTable.jsx\":5}],5:[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = ExtensibleInputTable;\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction filledArray(data, size) {\n    return Array(size).fill(data);\n}\n\nfunction arrayContains(value, arr) {\n    return arr.indexOf(value) !== -1;\n}\n\nfunction ExtensibleInputTable(props) {\n    var fixedColumns = props.fixedColumns,\n        inputNamePrefix = props.inputNamePrefix,\n        _onChange = props.onChange,\n        onRowBlur = props.onRowBlur,\n        titles = props.titles,\n        mainTitle = props.mainTitle,\n        onAddRow = props.onAddRow,\n        onRemoveRow = props.onRemoveRow,\n        tag = props.tag,\n        content = props.content;\n\n\n    var header = mainTitle ? _react2.default.createElement(\n        \"tr\",\n        null,\n        _react2.default.createElement(\n            \"th\",\n            { colSpan: \"2\" },\n            mainTitle\n        )\n    ) : null;\n    var ths = titles.map(function (title, i) {\n        return _react2.default.createElement(\n            \"th\",\n            { key: i },\n            title\n        );\n    });\n    var rows = content.map(function (row, i) {\n        return _react2.default.createElement(\n            \"tr\",\n            { key: i },\n            row.map(function (value, j) {\n                if (arrayContains(j, fixedColumns)) return _react2.default.createElement(\n                    \"td\",\n                    { key: j },\n                    _react2.default.createElement(\n                        \"span\",\n                        null,\n                        value\n                    ),\n                    _react2.default.createElement(\"input\", {\n                        type: \"hidden\",\n                        name: \"\" + inputNamePrefix + i + \"-\" + j,\n                        value: value\n                    })\n                );else return _react2.default.createElement(\n                    \"td\",\n                    { key: j },\n                    _react2.default.createElement(\"input\", {\n                        type: \"text\",\n                        name: \"\" + inputNamePrefix + i + \"-\" + j,\n                        value: value,\n                        required: \"required\",\n                        onChange: function onChange(event) {\n                            return _onChange(event.target.value, i, j, tag);\n                        },\n                        onBlur: function onBlur() {\n                            if (j === row.length - 1) onRowBlur(i, tag);\n                        }\n                    })\n                );\n            })\n        );\n    });\n    return _react2.default.createElement(\n        \"table\",\n        null,\n        _react2.default.createElement(\n            \"thead\",\n            null,\n            header,\n            _react2.default.createElement(\n                \"tr\",\n                null,\n                ths\n            )\n        ),\n        _react2.default.createElement(\n            \"tbody\",\n            null,\n            rows,\n            _react2.default.createElement(\n                \"tr\",\n                null,\n                _react2.default.createElement(\n                    \"td\",\n                    { colSpan: \"2\" },\n                    _react2.default.createElement(\n                        \"button\",\n                        {\n                            type: \"button\",\n                            className: \"plus-button\",\n                            onClick: function onClick() {\n                                return onAddRow(tag);\n                            }\n                        },\n                        _react2.default.createElement(\"span\", { className: \"glyphicon glyphicon-plus\" }),\n                        \"Adicionar Fila\"\n                    ),\n                    _react2.default.createElement(\n                        \"button\",\n                        {\n                            type: \"button\",\n                            className: \"minus-button\",\n                            onClick: function onClick() {\n                                return onRemoveRow(tag);\n                            }\n                        },\n                        _react2.default.createElement(\"span\", { className: \"glyphicon glyphicon-minus\" }),\n                        \"Eliminar Fila\"\n                    )\n                )\n            )\n        )\n    );\n}\n\nExtensibleInputTable.propTypes = {\n    tag: _react2.default.PropTypes.any,\n    titles: _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string).isRequired,\n    content: _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string)),\n    mainTitle: _react2.default.PropTypes.string,\n    inputNamePrefix: _react2.default.PropTypes.string,\n    fixedColumns: _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.number),\n    // events\n    onChange: _react2.default.PropTypes.func.isRequired,\n    onRowBlur: _react2.default.PropTypes.func,\n    onAddRow: _react2.default.PropTypes.func.isRequired,\n    onRemoveRow: _react2.default.PropTypes.func.isRequired\n};\n\nExtensibleInputTable.defaultProps = {\n    content: null,\n    mainTitle: null,\n    inputNamePrefix: '',\n    fixedColumns: [],\n    // events (by default do nothing)\n    onRowBlur: function onRowBlur() {}\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}]},{},[1]);\n"],"file":"als_matrix_criterion_form.js"}