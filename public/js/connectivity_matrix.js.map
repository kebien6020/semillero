{"version":3,"names":[],"mappings":"","sources":["connectivity_matrix.js"],"sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar $ = (typeof window !== \"undefined\" ? window['jQuery'] : typeof global !== \"undefined\" ? global['jQuery'] : null);\n\n$('.success-panel, .error-panel').addClass('alert fade in');\n$().alert();\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],2:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = QuestionForm;\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction renderInput(data, handleChange) {\n    var description = data.description ? _react2.default.createElement(\n        'p',\n        null,\n        data.description\n    ) : null;\n    if (data.type === 'boolean') {\n        // Render as checkbox\n        return _react2.default.createElement(\n            'div',\n            { className: 'form-group', key: data.id },\n            _react2.default.createElement(\n                'label',\n                null,\n                _react2.default.createElement('input', {\n                    type: 'checkbox',\n                    value: data.id,\n                    checked: data.answer,\n                    onChange: function onChange(event) {\n                        return handleChange(event, data.type, data.id);\n                    }\n                }),\n                data.text\n            ),\n            description\n        );\n    } else if (data.type === 'multi') {\n        // Render as select\n        var options = data.options.map(function (opt) {\n            return _react2.default.createElement(\n                'option',\n                { value: opt, key: opt },\n                opt\n            );\n        });\n        return _react2.default.createElement(\n            'div',\n            { className: 'form-group', key: data.id },\n            _react2.default.createElement(\n                'label',\n                null,\n                data.text\n            ),\n            description,\n            _react2.default.createElement(\n                'select',\n                {\n                    onChange: function onChange(event) {\n                        return handleChange(event, data.type, data.id);\n                    },\n                    value: data.answer },\n                options\n            )\n        );\n    }\n}\n\nfunction QuestionForm(props) {\n    var questions = props.questions;\n\n    var inputs = questions.map(function (data) {\n        return renderInput(data, props.handleChange);\n    });\n    var formStyle = {\n        paddingLeft: '15px',\n        paddingRight: '15px'\n    };\n    return _react2.default.createElement(\n        'form',\n        { style: formStyle },\n        inputs,\n        _react2.default.createElement('hr', { style: { borderColor: 'green' } })\n    );\n}\n\nQuestionForm.propTypes = {\n    questions: _react2.default.PropTypes.array.isRequired,\n    handleChange: _react2.default.PropTypes.func\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],3:[function(require,module,exports){\n(function (global){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _QuestionForm = require('./QuestionForm.jsx');\n\nvar _QuestionForm2 = _interopRequireDefault(_QuestionForm);\n\nvar _Recommendations = require('./Recommendations.jsx');\n\nvar _Recommendations2 = _interopRequireDefault(_Recommendations);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar QuestionMatrix = function (_React$Component) {\n    _inherits(QuestionMatrix, _React$Component);\n\n    function QuestionMatrix(props) {\n        _classCallCheck(this, QuestionMatrix);\n\n        var _this = _possibleConstructorReturn(this, (QuestionMatrix.__proto__ || Object.getPrototypeOf(QuestionMatrix)).call(this, props));\n\n        var answers = props.questions.map(function (q) {\n            return q.default;\n        });\n        _this.state = {\n            answers: answers\n        };\n        _this.handleChange = _this.handleChange.bind(_this);\n        return _this;\n    }\n\n    _createClass(QuestionMatrix, [{\n        key: 'handleChange',\n        value: function handleChange(event, type, questionId) {\n            var value = type === 'boolean' ? event.target.checked : event.target.value;\n            this.setState(function (state) {\n                state.answers[questionId] = value;\n                return state;\n            });\n        }\n    }, {\n        key: 'shownQuestions',\n        value: function shownQuestions(questions, answers) {\n            var answered = questions.map(function (q, i) {\n                q.answer = answers[i];\n                q.id = i;\n                q.show = true;\n                return q;\n            });\n            // filter by prereqs\n            for (var i = 0; i < answered.length; ++i) {\n                var q = answered[i];\n                // if there is no prereqs, just show the question\n                q.show = q.prereq.length === 0 || q.prereq.some(function (p) {\n                    return answered[p.id].answer === p.answer && answered[p.id].show;\n                });\n            }\n            return answered.filter(function (q) {\n                return q.show;\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            var shown = this.shownQuestions(this.props.questions, this.state.answers);\n            var flatMap = function flatMap(arr, lambda) {\n                return Array.prototype.concat.apply([], arr.map(lambda));\n            };\n            var recommendations = flatMap(shown, function (q) {\n                var recomendation = q.recommend[q.answer.toString()];\n                if (recomendation) return recomendation;\n                return [];\n            }).filter(function (rec) {\n                return rec !== null;\n            }).map(function (rec) {\n                return _this2.props.recommendationText[rec];\n            });\n            recommendations = new Set(recommendations);\n            recommendations = [].concat(_toConsumableArray(recommendations));\n            if (recommendations.length === 0) recommendations = [this.props.noRecommendations];\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(_QuestionForm2.default, {\n                    questions: shown,\n                    handleChange: this.handleChange.bind(this)\n                }),\n                _react2.default.createElement(_Recommendations2.default, {\n                    recommendations: recommendations\n                })\n            );\n        }\n    }]);\n\n    return QuestionMatrix;\n}(_react2.default.Component);\n\nexports.default = QuestionMatrix;\n\n\nQuestionMatrix.propTypes = {\n    questions: _react2.default.PropTypes.array.isRequired,\n    recommendationText: _react2.default.PropTypes.object.isRequired,\n    noRecommendations: _react2.default.PropTypes.string.isRequired\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./QuestionForm.jsx\":2,\"./Recommendations.jsx\":4}],4:[function(require,module,exports){\n(function (global){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = Recommendations;\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction Recommendations(props) {\n    var list = props.recommendations.map(function (rec, i) {\n        return _react2.default.createElement(\n            \"li\",\n            { key: i },\n            rec\n        );\n    });\n    return _react2.default.createElement(\n        \"div\",\n        { className: \"recommendations\" },\n        _react2.default.createElement(\n            \"h2\",\n            null,\n            \"Recomendaciones\"\n        ),\n        _react2.default.createElement(\n            \"ul\",\n            null,\n            list\n        )\n    );\n}\n\nRecommendations.propTypes = {\n    recommendations: _react2.default.PropTypes.array.isRequired\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],5:[function(require,module,exports){\n(function (global){\n'use strict';\n\nrequire('./app');\n\nvar _react = (typeof window !== \"undefined\" ? window['React'] : typeof global !== \"undefined\" ? global['React'] : null);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = (typeof window !== \"undefined\" ? window['ReactDOM'] : typeof global !== \"undefined\" ? global['ReactDOM'] : null);\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _QuestionMatrix = require('./components/QuestionMatrix.jsx');\n\nvar _QuestionMatrix2 = _interopRequireDefault(_QuestionMatrix);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar questions = [\n// 0\n{\n    text: 'Condición de presión',\n    type: 'multi',\n    options: ['Bajo balance', 'Sobre balance', 'Desconocida'],\n    default: 'Sobre balance',\n    prereq: [],\n    recommend: {}\n},\n// 1\n{\n    text: '¿El pozo se encuentra con tubería de producción o con revestimiento?',\n    type: 'multi',\n    options: ['Tubería de producción', 'Revestimiento'],\n    default: 'Revestimiento',\n    prereq: [{\n        id: 0,\n        answer: 'Desconocida'\n    }],\n    recommend: {\n        'Revestimiento': ['gun']\n    }\n},\n// 2\n{\n    text: '¿La sección a cañonear es de gran longitud y se requiere una densidad de disparo > 6TTP?',\n    type: 'boolean',\n    default: false,\n    prereq: [{\n        id: 0,\n        answer: 'Bajo balance'\n    }],\n    recommend: {\n        'true': ['tcp', 'pure'],\n        'false': ['thru', 'slickline']\n    }\n},\n// 3\n{\n    text: '¿Es necesaria una velocidad de operación alta?',\n    type: 'boolean',\n    default: false,\n    prereq: [{\n        id: 0,\n        answer: 'Sobre balance'\n    }],\n    recommend: {\n        'true': ['gun', 'extreme'],\n        'false': ['thru', 'extreme']\n    }\n},\n// 4\n{\n    text: ['Se tiene alguna de estas condiciones?', _react2.default.createElement(\n        'ul',\n        { key: '0' },\n        _react2.default.createElement(\n            'li',\n            null,\n            '\\xC1ngulo de pozo > 60\\xB0.'\n        ),\n        _react2.default.createElement(\n            'li',\n            null,\n            'Requiere ca\\xF1onear zonas m\\xFAltiples.'\n        ),\n        _react2.default.createElement(\n            'li',\n            null,\n            'Densidad de disparo > 6 TTP.'\n        ),\n        _react2.default.createElement(\n            'li',\n            null,\n            'Ca\\xF1onear zonas profundas'\n        )\n    )],\n    type: 'boolean',\n    default: false,\n    prereq: [{\n        id: 1,\n        answer: 'Tubería de producción'\n    }],\n    recommend: {\n        'true': ['tcp', 'high'],\n        'false': ['thru']\n    }\n}];\n\nvar makeLink = function makeLink(name, text) {\n    return _react2.default.createElement(\n        'a',\n        { href: '/conectividad/matrix/explanations#' + name },\n        text\n    );\n};\n\nvar recommendations = {\n    thru: [makeLink('thru', 'Through Tubing Wireline'), ' (cañoneo a través de tubería de producción bajado con línea eléctrica)'],\n    tcp: [makeLink('tcp', 'TCP'), ' (cañoneo bajado con la tubería de producción)'],\n    gun: [makeLink('gun', 'Casing Gun Wireline'), ' (cañoneo a través de revestimiento bajado con línea eléctrica)'],\n    pure: 'Sugerencia: Utilizar la técnica Pure para que los perforados queden limpios, incrementar la productividad e inyectabilidad en los pozos. Además permite minimizar el daño por el cañoneo.',\n    slickline: 'Sugerencia: Utilizar cargas que minimicen la producción de derbis.',\n    extreme: 'Sugerencia: Utilizar la técnica de sobre balance extremo para minimizar el daño e incrementar la conectividad.',\n    high: 'Sugerencia: Utilizar un sistema de High Shot Density (alta densidad de disparo). También se puede utilizar el método Through tubing con coiled tubing para pozos altamente desviados.'\n\n};\n\n_reactDom2.default.render(_react2.default.createElement(_QuestionMatrix2.default, {\n    questions: questions,\n    recommendationText: recommendations,\n    noRecommendations: 'No se recomienda completamiento m\\xFAltiple'\n}), document.getElementById('matrix'));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./app\":1,\"./components/QuestionMatrix.jsx\":3}]},{},[5]);\n"],"file":"connectivity_matrix.js"}